<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <title>Infuusiolaskuri â€” iOS Style</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* ------------------------------
       BASE
    ------------------------------ */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      background: #f2f2f7;
      margin: 0;
      padding: 20px;
      color: #000;
    }

    h1 {
      text-align: center;
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 25px;
      color: #111;
    }

    /* ------------------------------
       iOS CARD
    ------------------------------ */
    .card {
      background: #fff;
      border-radius: 14px;
      padding: 18px 20px;
      margin-bottom: 18px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    .card-title {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }

    /* ------------------------------
       INPUTS (iOS style)
    ------------------------------ */
    .input-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #e5e5ea;
    }

    .input-row:last-child {
      border-bottom: none;
    }

    .input-label {
      font-size: 16px;
      color: #555;
    }

    input, select {
      font-size: 17px;
      border: none;
      background: transparent;
      text-align: right;
      width: 120px;
      outline: none;
      color: #007aff;
    }

    /* ------------------------------
       RESULTS (iOS Calculator style)
    ------------------------------ */
    .result-block {
      padding: 10px 0;
      border-bottom: 1px solid #e5e5ea;
    }

    .result-label {
      font-size: 15px;
      color: #666;
    }

    .result-value {
      font-size: 24px;
      font-weight: 600;
      text-align: right;
      color: #000;
      margin-top: 4px;
    }

    /* ------------------------------
       BUTTON
    ------------------------------ */
    #clearAllBtn {
      width: 100%;
      background: #007aff;
      color: #fff;
      border: none;
      padding: 14px;
      font-size: 18px;
      border-radius: 12px;
      margin-top: 20px;
      cursor: pointer;
    }

    /* ------------------------------
       DARK MODE
    ------------------------------ */
    body.dark {
      background: #1c1c1e;
      color: #fff;
    }

    body.dark .card {
      background: #2c2c2e;
      box-shadow: none;
    }

    body.dark .card-title {
      color: #fff;
    }

    body.dark .input-label {
      color: #ccc;
    }

    body.dark input, body.dark select {
      color: #0a84ff;
    }

    body.dark .result-label {
      color: #aaa;
    }

    body.dark .result-value {
      color: #fff;
    }

    body.dark #clearAllBtn {
      background: #0a84ff;
    }

    /* Theme toggle */
    #themeToggle {
      position: fixed;
      top: 12px;
      right: 12px;
      background: #ddd;
      border: 1px solid #aaa;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      z-index: 999;
    }

    body.dark #themeToggle {
      background: #3a3a3c;
      color: #fff;
      border-color: #666;
    }
  </style>
</head>

<body>

<button id="themeToggle">ðŸŒ™</button>

<h1>Infuusiolaskuri</h1>

<!-- Hidden laakelista -->
<table id="laakelista" style="display:none;">
  <tr><td>Remifentanyl 50 Âµg/ml</td><td>50</td><td>Âµg/ml</td><td>0.05</td><td>0.2</td></tr>
  <tr><td>Propofol 20 mg/ml</td><td>20</td><td>mg/ml</td><td>1</td><td>4</td></tr>
  <tr><td>Ketamine 25 mg/ml</td><td>25</td><td>mg/ml</td><td>0.5</td><td>2</td></tr>
  <tr><td>Milrinone 200 Âµg/ml</td><td>200</td><td>Âµg/ml</td><td>0.25</td><td>0.75</td></tr>
  <tr><td>Dobutamine 500 Âµg/ml</td><td>500</td><td>Âµg/ml</td><td>2</td><td>20</td></tr>
  <tr><td>Noradrenalin 80 Âµg/ml</td><td>80</td><td>Âµg/ml</td><td>0.01</td><td>0.5</td></tr>
  <tr><td>Noradrenalin 40 Âµg/ml</td><td>40</td><td>Âµg/ml</td><td>0.01</td><td>0.5</td></tr>
  <tr><td>Adrenalin 20 Âµg/ml</td><td>20</td><td>Âµg/ml</td><td>0.01</td><td>0.5</td></tr>
</table>

<!-- ------------------------------
     CARD: LÃ„Ã„KE
------------------------------ -->
<div class="card">
  <div class="card-title">LÃ¤Ã¤ke</div>

  <div class="input-row">
    <div class="input-label">Valitse</div>
    <select id="drug"></select>
  </div>

  <div class="input-row">
    <div class="input-label">Pitoisuus</div>
    <div id="concDisplay" class="input-label" style="color:#007aff;"></div>
  </div>
</div>

<!-- ------------------------------
     CARD: PAINO
------------------------------ -->
<div class="card">
  <div class="card-title">Paino</div>

  <div class="input-row">
    <div class="input-label">kg</div>
    <input id="weight" type="number" step="0.1">
  </div>
</div>

<!-- ------------------------------
     CARD: NOPEUS / ANNOS
------------------------------ -->
<div class="card">
  <div class="card-title">Annos / Nopeus</div>

  <div class="input-row">
    <div class="input-label">Nopeus (ml/h)</div>
    <input id="rate" type="number" step="0.01">
  </div>

  <div class="input-row">
    <div class="input-label">Tavoitettu annos</div>
    <input id="doseInput" type="number" step="0.001">
  </div>

  <div class="input-row">
    <div class="input-label">YksikkÃ¶</div>
    <div id="doseUnitCell" class="input-label" style="color:#007aff;"></div>
  </div>

  <div id="doseWarning" style="color:#d00; margin-top:10px; font-weight:600;"></div>
</div>

<!-- ------------------------------
     CARD: RESULTS
------------------------------ -->
<div class="card">
  <div class="card-title">Tulokset</div>

  <div class="result-block">
    <div class="result-label">Laskettu nopeus (ml/h)</div>
    <div class="result-value" id="mlH"></div>
  </div>

  <div class="result-block">
    <div class="result-label">mg/h</div>
    <div class="result-value" id="mgH"></div>
  </div>

  <div class="result-block">
    <div class="result-label">mg/kg/h</div>
    <div class="result-value" id="mgKgH"></div>
  </div>

  <div class="result-block">
    <div class="result-label">Âµg/kg/h</div>
    <div class="result-value" id="ugKgH"></div>
  </div>

  <div class="result-block">
    <div class="result-label">Âµg/kg/min</div>
    <div class="result-value" id="ugKgMin"></div>
  </div>

  <div class="result-block">
    <div class="result-label">Suositus</div>
    <div class="result-value" id="doseInfo"></div>
  </div>
</div>

<button id="clearAllBtn">TyhjennÃ¤ kaikki</button>

<script src="app.js"></script>

<script>
  /* Auto theme */
  function applySystemTheme() {
    if (localStorage.getItem("theme") === "light") return;
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark");
      return;
    }
    const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    document.body.classList.toggle("dark", prefersDark);
  }

  applySystemTheme();
  window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", applySystemTheme);

  document.getElementById("themeToggle").onclick = () => {
    document.body.classList.toggle("dark");
    localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
  };
</script>

</body>
</html>
